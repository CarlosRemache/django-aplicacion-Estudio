<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seguimiento de Hábitos de Estudio </title>
       <!--Importado jquery -->
       <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

    <!--implementacion de cdn de boobstrp-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
     <!--implementacion de izitoad-->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js" integrity="sha512-Zq9o+E00xhhR/7vJ49mxFNJ0KQw1E1TMWkPTxrWcnpfEFDEXgUiwJHIKit93EW/XxE31HSI5GEOW06G6BF1AtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/css/iziToast.css" integrity="sha512-DIW4FkYTOxjCqRt7oS9BFO+nVOwDL4bzukDyDtMO7crjUZhwpyrWBFroq+IqRe6VnJkTpRAS6nhDvf0w+wHmxg==" crossorigin="anonymous" referrerpolicy="no-referrer" /> 
 
    
    <!--implementacion de jquery validate-->
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.js"></script>

  </head>
<body>

  <style>
    .bg-info {
        background-color: #4274c2 !important; /* Cambia por el color que desees */
    }

    .bg-primary{
      background-color: #d3d5ab !important; /* Cambia por el color que desees */

    }

    .dropdown-menu{
      background-color: #d3d5ab !important; /* Cambia por el color que desees */

    }
</style>

   
<div class="bg-info">
<center>
<br>


<div class="btn-group">
  <a class="navbar-brand" href="/inicio/">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTKv_6RISZCZQlXMTe80m7RXimGcmlUO3gkZg&s" width="40" height="40" alt="">
  </a>

</div>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;




<div class="btn-group">
    <button class="btn bg-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        Usuarios
    </button>
    <ul class="dropdown-menu">
      <li><a class="dropdown-item" href="/listadousuario/">Listado de usuario</a></li>
      <li><a  class="dropdown-item"href="/nuevousuario/">Agregar usuario</a></li>

    </ul>
  </div>




  <div class="btn-group">
    <button class="btn bg-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        habitos
    </button>
    <ul class="dropdown-menu">
      <li><a  class="dropdown-item" href="/listadohabito/">Listado de habito</a></li>
      <li><a   class="dropdown-item" href="/nuevohabito/">Agregar habito</a></li>

    </ul>
  </div>


  <div class="btn-group">
    <button class="btn bg-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        Progreso
    </button>
    <ul class="dropdown-menu">
      <li><a  class="dropdown-item" href="/listadoprogreso/">Listado de progreso</a></li>

    </ul>
  </div>




  <div class="btn-group">
    <button class="btn bg-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        Notificacion
    </button>
    <ul class="dropdown-menu">
      <li><a  class="dropdown-item"  href="/listadonotificacion/">Listado de notificacion</a></li>
      <li><a  class="dropdown-item" href="/nuevanotificacion/">Agregar notifiacion</a></li>

    </ul>
  </div>



  <div class="btn-group">
    <button class="btn bg-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
        Metas
    </button>
    <ul class="dropdown-menu">
      <li> <a  class="dropdown-item" href="/listadometa/">Listado de meta</a> </li>
      <li><a   class="dropdown-item" href="/nuevaficha/">Agregar meta</a></li>

    </ul>
  </div>



</center>
<br>
<br>
</div>
<br>
<br>
<br>


    {% block contenido %}


    {% endblock %}
<br>
<br>
<br>    
<br>
<br>
<br>
<br>
<div class="text-center bg-info" >
<br>

<h3>Desarrollado por: 
    Carlos Remache &copy; </h3>
    <br>2024
</div>

<!--verificacion y mostrando mensajes-->

{% if messages %}
    {% for mesajeConfirmacion in messages %}
        <script>
            // Verifica si el tag del mensaje es "success"
            if ("{{ mesajeConfirmacion.tags }}" === "success") {
                iziToast.success({
                    title: 'CONFIRMACIÓN',
                    message: "{{ mesajeConfirmacion }}", // Corregido: "messages" a "message"
                    position: 'topRight'
                });
            }
        </script>
    {% endfor %}
{% endif %}





<!-- Mostrar mensajes dinámicos -->
{% if messages %}
    {% for message in messages %}
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                // Extraer los datos del mensaje enviado por Django
                let datos = "{{ message }}".split("|");
                let nombreHabito = datos[0];
                let horaLimite = datos[1];
                let fechaLimite = datos[2];

                // Convertir fecha y hora en un objeto Date
                let fechaLimiteObj = new Date(`${fechaLimite} ||${horaLimite}`);

                // Mostrar la primera notificación
                iziToast.info({
                    title: 'Nuevo Hábito Creado',
                    message: `El hábito "${nombreHabito}" fue creado exitosamente. Recuerda completarlo antes de las ${horaLimite} del ${fechaLimite}.`,
                    position: 'topRight',
                    timeout: 5000 // Mostrar el mensaje por 5 segundos
                });

                // Configurar repetición cada 2 minutos (120,000 ms)
                let intervalo = setInterval(function() {
                    let ahora = new Date();
                    
                    // Si la hora límite ya pasó, detener las notificaciones
                    if (ahora > fechaLimiteObj) {
                        clearInterval(intervalo);  // Detener el intervalo
                    } else {
                        // Mostrar recordatorio cada 2 minutos
                        iziToast.info({
                            title: 'Recordatorio',
                            message: `Recuerda que el hábito "${nombreHabito}" debe completarse antes de las ${horaLimite} del ${fechaLimite}.`,
                            position: 'topRight',
                            timeout: 5000
                        });
                    }
                }, 120000); // Cada 2 minutos
            });
        </script>
    {% endfor %}
{% endif %}














    <script>
      jQuery.validator.addMethod("letras", function(value, element) {            
          return this.optional(element) || /^[A-Za-zÁÉÍÓÚÑáéíóúñ ]*$/.test(value);
         
        }, "Este campo solo acepta letras"); 
  </script>
  
</body>
</html>





























